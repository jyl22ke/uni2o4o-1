<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>load demo</title>
  <style>
  *{
	margin:0;
	padding:0;
	}
  body {
    font-size: 12px;
    font-family: Arial;
	}
  .ss{
	float:left;
	border:1px solid red;
	width:632px;
	height:480px;
	}
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script type="text/javascript">
	
var codeList = [
["드래곤플라이","A030350"],
["CS","A065770"],
["크라운제과","A264900"],
["대한항공","A003490"],
["삼성전자","A005930"],
["현대차","A005380"],
["현대오토에버","A307950"],
["현대건설","A000720"],
["한진칼","A180640"]
];

// View Chart 화면 생성-------------------------
var name = ""; var fcode = "";var fn = "";

function viewChart(){
	$(function(){
		$('.container').empty();
		for ( i=0 ; i <6; i++ ){
			fcode = codeList[i][1];
			name = codeList[i][0];
			fn = "./_"+i+"_chart.html";
			$('.container').append('<div class="ss"><span><b>' + name + ' ' + fcode + '</b></span><br><iframe src="' + fn + '"width=630 height=460></iframe></div>');
		};
	});
};

// HTML chart 파일 생성------------------------
var strdata = ""; var code = "";

function chart(){
    $(function (){
		for ( i=0 ; i <6 ; i++ ){
			strdata = "";
			code = codeList[i][1].substring(1,7);
			strdata = '<div style="position:absolute; top:-280px; left:-20px;border:1px solid black" class="ss' + i + '"><span><b>' + codeList[i][0] + ' ' + codeList[i][1] + '</b></span><br><iframe src="https://finance.naver.com/item/fchart.nhn?code=' + code + '" width="650" height="1070" scrolling="no" frameborder="0"></iframe></div>';
			saveAsFile(strdata, "./"+ i +"_chart.html");
		}
	});
};

function saveAsFile(str, filename) {
    var hiddenElement = document.createElement('a');
    hiddenElement.href = 'data:attachment/text,' + encodeURI(str);
    hiddenElement.target = '_blank';
    hiddenElement.download = filename;
    hiddenElement.click();
};

</script>

</head>
<body>
<span>     </span>
<button class="btn" onClick="chart();">Chart생성</button>
<button class="btn" onClick="viewChart();">ViewChart</button>
<div class="container">
</div>
 
</body>
</html>
