<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <style type="text/css">
	*{
		margin:0;
		padding:0;
		}
	body {
		font-size: 12px;
		font-family: Arial;
		}
	.vs{
		width:632px;
		height:480px;
		float:left;
		border:1px solid red;
		overflow:auto;
		}
	.ss{
		border-top:1px solid red;
		width:632px;
		height:790px;
		overflow:hidden;
		}
	span{
		position:fixed;
		z-index:10;
		}
  </style>
 </head>
 <body>

  <div class="container"></div>

  <script type="text/javascript">
// csv 파일 읽어오는 함수-------------------
fread("codeList");
	  
function fread(fn){
    $(function (){
	var fileName = "./" + fn + ".csv";	// 파일 이름

	$.ajax({
		url:fileName,
		dataType:'text',
		success: function(da) {
			var textLine = '<script type="text/javascript">var ' + fn + '=[';
                        var rows = da.split('\n');
                        for (var i = 0; i < rows.length; i++) {
				if (i == 0){textLine += '['}else{textLine += ',['};
				var cells = rows[i].split(',');
                                for (var j = 0; j < cells.length; j++) {
					textLine += '"';
					textLine += cells[j].trim();;
					if (j == cells.length-1){textLine += '"'}else{textLine += '",'};
				}
				textLine += ']';
			}	
			textLine += ']';			
			$('head').append(textLine);
		}
	});
    });
};

// View Chart 화면 생성-------------------------
var xt = new Array;

function mkChart(){
	$(function (){

		for ( i=0 ; i <codeList.length ; i++ ){
			xt.push('<div class="vs"><span><b>' + codeList[i][0] + ' ' + codeList[i][1] + '</b></span><br><div class="ss"><iframe style="position:relative; top:-280px; left:-20px;" src="https://finance.naver.com/item/fchart.nhn?code=' + codeList[i][1].substring(1,7) + '" width="632" height="1070" scrolling="no" frameborder="0"></iframe></div></div>');
		};

		for ( i=0 ; i <6 ; i++ ){
			txt = xt[i];
			$('.container').append([txt]);
		};
	});
};
mkChart();

  </script>
</body>
</html>
